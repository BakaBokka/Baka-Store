{"version":3,"sources":["components/Header/Header.tsx","components/BookListItem/BookListItem.tsx","components/BookstoreServiceContext/BookstoreServiceContext.js","components/HOC/WithBookstoreService.tsx","actions/index.js","components/Spinner/Spinner.tsx","components/ErrorIndicator/ErrorIndicator.tsx","components/BookList/BookList.tsx","components/Cart/Cart.tsx","components/Pages/HomePage.tsx","components/Pages/CartPage.tsx","components/App/App.tsx","services/book-service.js","reducers/bookList.js","reducers/cart.js","reducers/index.js","store.js","components/ErrorBoundry/index.js","components/ErrorBoundry/ErrorBoundry.tsx","index.js"],"names":["Header","props","className","to","numItems","total","BookListItem","src","book","cover","alt","title","href","author","price","onClick","onAddToCart","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","WithBookstoreService","Wrapped","BookstoreService","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","Spinner","ErrorIndicator","connect","state","books","bookList","loading","error","ownProps","id","useEffect","map","mapDispatchToProps","onIncrease","onDecrease","onDelete","items","cart","cartItems","orderTotal","tableRow","item","i","width","quantity","HomePage","CartPage","App","path","component","exact","Promise","resolve","reject","setTimeout","Error","updateBookList","action","undefined","updateCartItems","slice","updateOrder","count","find","itemIndex","findIndex","newItem","updateCartItem","updateCart","reducer","store","createStore","ErrorBoundry","hasError","this","setState","children","Component","bookstoreservice","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.b6da1697.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./Header.scss\";\nimport { Link } from \"react-router-dom\";\n\nfunction Header(props: { numItems: number; total: number }) {\n  return (\n    <header className=\"Header row\">\n      <Link to=\"/\" className=\"text-decoration-none\">\n        <span className=\"Header__logo text-dark \">\n          Baka.Store\n        </span>\n      </Link>\n      <Link to=\"/cart\" className=\"text-decoration-none\">\n        <span className=\"Header__cart-link\">\n          <i className=\"Header__icon fa fa-shopping-cart\"></i>\n          {props.numItems} items (${props.total})\n        </span>\n      </Link>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from \"react\";\nimport { Book } from \"../../utils/types\";\nimport \"./BookListItem.scss\";\n\nfunction BookListItem(props: { book: Book; onAddToCart: () => void }) {\n  return (\n    <div className=\"BookListItem \">\n      <img className=\"BookListItem__cover\" src={props.book.cover} alt={`\"${props.book.title}\" cover`}/>\n      <div className=\"BookListItem__content\">\n      <div className=\"BookListItem__details\">\n        <a className=\"BookListItem__title\" href=\"/#\">\n          {props.book.title}\n        </a>\n        <span className=\"BookListItem__author mb-2\">{props.book.author}</span>\n        <span className=\"BookListItem__price \">{`$${props.book.price}`}</span>\n\n      </div>\n      <button className=\"BookListItem__button btn btn-info mb-2\"\n        onClick={props.onAddToCart}\n      >Add to cart</button>\n      </div>\n    </div>\n  );\n}\n\nexport default BookListItem;\n","import {createContext} from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};","import React from \"react\";\nimport BookstoreService from \"../../services/book-service\";\nimport { BookstoreServiceConsumer } from \"../BookstoreServiceContext\";\n\n\nconst WithBookstoreService = () => (Wrapped:any) => {\n  return ( props: any) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (BookstoreService) => {\n            return (<Wrapped {...props}\nbookstoreService={BookstoreService}/>\n              )\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n};\n\nexport default WithBookstoreService;","const booksLoaded = (newBooks) => {\n  return {\n    type: \"FECTH_BOOKS_SUCCESS\",\n    payload: newBooks,\n  };\n};\nconst booksError = (error) => {\n  return {\n    type: \"FECTH_BOOKS_FAILURE\",\n    payload: error,\n  };\n};\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: \"BOOK_ADDED_TO_CART\",\n    payload: bookId\n  }\n};\n\nconst bookRemovedFromCart = (bookId) => {\n  return {\n    type: \"BOOK_REMOVED_FROM_CART\",\n    payload: bookId\n  }\n};\n\nconst AllBooksRemovedFromCart = (bookId) => {\n  return {\n    type: \"ALL_BOOKS_REMOVED_FROM_CART\",\n    payload: bookId\n  }\n};\n\nconst fetchBooks = (bookstoreService, dispatch) => () => {\n  bookstoreService\n    .getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nexport { fetchBooks, bookAddedToCart, bookRemovedFromCart, AllBooksRemovedFromCart };\n","import React from 'react';\nimport  \"./Spinner.scss\";\n\nconst Spinner = () => {\n  return <div>Loading...</div>\n}\n\nexport default Spinner;","import React from 'react';\nimport  \"./ErrorIndicator.scss\";\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>\n}\n\nexport default ErrorIndicator;","import React, { useEffect } from \"react\";\nimport BookListItem from \"../BookListItem/BookListItem\";\nimport { Book } from \"../../utils/types\";\nimport { connect } from \"react-redux\";\nimport { WithBookstoreService } from \"../HOC\";\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\nimport \"./BookList.scss\";\nimport Spinner from \"../Spinner/Spinner\";\nimport ErrorIndicator from \"../ErrorIndicator/ErrorIndicator\";\n\nfunction BookList(props: {\n  books: Book[];\n  onAddToCart: (id: string) => void;\n  loading: boolean;\n  error: any;\n  fetchBooks: () => void;\n}) {\n  useEffect(() => {\n    props.fetchBooks();\n  }, []);\n\n  return !props.error ? (\n    props.loading ? (\n      <Spinner />\n    ) : (\n      <ul className=\"BookList\">\n        {props.books.map((book: Book) => (\n          <li className=\"BookList__item\" key={+book.id}>\n            <BookListItem\n              book={book}\n              onAddToCart={() => props.onAddToCart(book.id)}\n            />\n          </li>\n        ))}\n      </ul>\n    )\n  ) : (\n    <ErrorIndicator />\n  );\n}\n\nconst mapStateToProps = (state: {\n  bookList: {\n    books: Book[];\n    loading: boolean;\n    error: any;\n  };\n}) => {\n  return {\n    books: state.bookList.books,\n    loading: state.bookList.loading,\n    error: state.bookList.error,\n  };\n};\n\nconst mapDispatchToProps = (\n  dispatch: any,\n  ownProps: { bookstoreService: any }\n) => {\n  return {\n    fetchBooks: fetchBooks(ownProps.bookstoreService, dispatch),\n    onAddToCart: (id: string) => dispatch(bookAddedToCart(id)),\n  };\n};\n\nexport default WithBookstoreService()(\n  connect(mapStateToProps, mapDispatchToProps)(BookList)\n);\n","import React from \"react\";\nimport { CartItem } from \"../../utils/types\";\nimport { connect } from \"react-redux\";\nimport \"./Cart.scss\";\nimport { bookAddedToCart, bookRemovedFromCart, AllBooksRemovedFromCart  } from \"../../actions\";\n\nfunction Cart(props: {\n  items: CartItem[];\n  total: number;\n  onIncrease: (id: string) => void;\n  onDecrease: (id: string) => void;\n  onDelete: (id: string) => void;\n}) {\n  const tableRow = props.items.map((item: CartItem, i: number) => {\n    return (\n      <tr key={item.id}>\n        <td className=\"p-2\"width=\"5%\">{i + 1}</td>\n        <td  width=\"60%\">{item.title}</td>\n        <td>{item.quantity}</td>\n        <td>{`$${item.price}`}</td>\n        <td className=\"Cart__table-action p-3\" width=\"15%\">\n          <button\n            className=\"Cart__table-button btn btn-outline-warning \"\n            onClick={() => props.onDecrease(item.id)}\n          >\n            <i className=\"fa fa-minus-circle\"></i>\n          </button>\n          <button\n            className=\"Cart__table-button btn btn-outline-success \"\n            onClick={() => props.onIncrease(item.id)}\n          >\n            <i className=\"fa fa-plus-circle\"></i>\n          </button>\n          <button\n            className=\"Cart__table-button btn btn-outline-danger \"\n            onClick={() => props.onDelete(item.id)}\n          >\n            <i className=\"fa fa-trash-o\"></i>\n          </button>\n        </td>\n      </tr>\n    );\n  });\n\n  return (\n    <section className=\"Cart\">\n      <h2 className=\"Cart__title\">Your order</h2>\n      <table className=\"Cart__table\">\n        <thead className=\"Cart__table-header\">\n          <tr>\n            <th className=\"p-2\">#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n        <tbody>{tableRow}</tbody>\n      </table>\n\n      <span className=\"Cart__total\"> Total: $50 </span>\n    </section>\n  );\n}\n\nconst mapStateToProps = (state: { cart: {\n  cartItems: CartItem[];\n  orderTotal: number;\n}\n\n}) => {\n  return {\n    items: state.cart.cartItems,\n    total: state.cart.orderTotal,\n  };\n};\n\nconst mapDispatchToProps =  {\n\n    onIncrease: bookAddedToCart,\n    onDecrease: bookRemovedFromCart,\n    onDelete: AllBooksRemovedFromCart,\n\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\n","import React from 'react'\nimport BookList from '../BookList/BookList'\nimport Cart from '../Cart/Cart'\n\nfunction HomePage() {\n  return (\n    <>\n    <BookList />\n    <Cart/>\n    </>\n  )\n};\n\nexport default HomePage\n","import React from 'react'\n\nfunction CartPage() {\n  return (\n    <div>\n      Cart Page\n    </div>\n  )\n}\n\nexport default CartPage\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Header from \"../Header/Header\";\nimport { HomePage, CartPage } from \"../Pages/index\";\n\nimport \"./App.scss\";\n\nconst App = () => {\n  return (\n    <main className=\"container\">\n      <Header numItems={5} total={210}/>\n    <Switch>\n      <Route path=\"/Baka-Store\" component={HomePage} exact />\n      <Route path=\"/cart\" component={CartPage} />\n    </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","export default class BookstoreService {\n\n  data = [\n  {\n    id: 1,\n    title: \"The Blade Itself\",\n    author: \"Joe Abercrombie\",\n    price: 25,\n    cover:\n      \"https://i1.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-the-blade-itself.jpg?resize=424%2C650&ssl=1\",\n  },\n  {\n    id: 2,\n    title: \"Before They Are Hanged\",\n    author: \"Joe Abercrombie\",\n    price: 40,\n    cover:\n      \"https://i0.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-before-they-are-hanged.jpg?resize=423%2C650&ssl=1\",\n  },\n  {\n    id: 3,\n    title: \"Last Argument of Kings\",\n    author: \"Joe Abercrombie\",\n    price: 32,\n    cover:\n      \"https://i1.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-last-argument-of-kings.jpg?resize=424%2C650&ssl=1\",\n  },\n];\n\n  getBooks() {\n    return new Promise ((resolve, reject) => {\nsetTimeout(() => {\n  resolve(this.data);\n  reject(new Error(\"Oshibka!\"))\n}, 700)\n    })\n  }\n}\n","export const updateBookList = (state, action) => {\n\n  if( state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    }\n  }\n  switch (action.type) {\n    case \"FECTH_BOOKS_SUCCESS\":\n      return {\n        books: action.payload,\n        loading: false,\n        error: null,\n      };\n    case \"FECTH_BOOKS_FAILURE\":\n      return {\n        books: [],\n        loading: false,\n        error: action.payload,\n      };\n    default:\n      return state.bookList;\n  }\n};\n","const updateCartItems = (cartItems, item, i) => {\n  if (item.quantity === 0) {\n    return [...cartItems.slice(0, i), ...cartItems.slice(i + 1)];\n  }\n\n  if (i === -1) {\n    return [...cartItems, item];\n  }\n\n  return [...cartItems.slice(0, i), item, ...cartItems.slice(i + 1)];\n};\n\nconst updateCartItem = (book, item = {}, count) => {\n  const { id = book.id, title = book.title, quantity = 0, price = 0 } = item;\n\n  return {\n    id,\n    title,\n    quantity: quantity + count,\n    price: price + count * book.price,\n  };\n};\n\nconst updateOrder = (state, bookId, count) => {\n  const {\n    bookList: { books },\n    cart: { cartItems },\n  } = state;\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n  const newItem = updateCartItem(book, item, count);\n\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\n  };\n};\n\n\nexport const updateCart = (state, action) => {\n  if( state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n    }\n  }\n\n  switch (action.type) {\n    case \"BOOK_ADDED_TO_CART\":\n      return updateOrder(state, action.payload, 1);\n\n    case \"BOOK_REMOVED_FROM_CART\":\n      return updateOrder(state, action.payload, -1);\n\n    case \"ALL_BOOKS_REMOVED_FROM_CART\":\n      const item = state.cart.cartItems.find(({ id }) => id === action.payload);\n      return updateOrder(state, action.payload, -item.quantity);\n    default:\n      return state.cart;\n  }\n};\n\n\n","import {updateBookList} from \"./bookList\";\nimport {updateCart} from \"./cart\";\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    cart: updateCart(state, action),\n  };\n};\n\nexport default reducer;\n","import { createStore} from \"redux\";\nimport reducer from \"./reducers\";\n\nconst store = createStore(reducer);\n\nexport default store;","import ErrorBoundry from \"./ErrorBoundry\"\n\nexport default ErrorBoundry;","import React, { Component } from \"react\";\nimport ErrorIndicator from \"../ErrorIndicator/ErrorIndicator\";\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false,\n  };\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n// import './index.scss';\nimport App from \"./components/App/App\";\nimport BookstoreService from \"./services/book-service\";\nimport store from \"./store\";\nimport ErrorBoundry from \"./components/ErrorBoundry\";\nimport { BookstoreServiceProvider } from \"./components/BookstoreServiceContext\";\n\nconst bookstoreservice = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreservice}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}