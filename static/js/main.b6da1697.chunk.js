(this["webpackJsonpbaka-store"]=this["webpackJsonpbaka-store"]||[]).push([[0],{36:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(13),o=n.n(r),a=n(10),i=n(9),s=n(3),l=(n(36),n(1));var u=function(t){return Object(l.jsxs)("header",{className:"Header row",children:[Object(l.jsx)(i.b,{to:"/",className:"text-decoration-none",children:Object(l.jsx)("span",{className:"Header__logo text-dark ",children:"Baka.Store"})}),Object(l.jsx)(i.b,{to:"/cart",className:"text-decoration-none",children:Object(l.jsxs)("span",{className:"Header__cart-link",children:[Object(l.jsx)("i",{className:"Header__icon fa fa-shopping-cart"}),t.numItems," items ($",t.total,")"]})})]})};n(39);var b=function(t){return Object(l.jsxs)("div",{className:"BookListItem ",children:[Object(l.jsx)("img",{className:"BookListItem__cover",src:t.book.cover,alt:'"'.concat(t.book.title,'" cover')}),Object(l.jsxs)("div",{className:"BookListItem__content",children:[Object(l.jsxs)("div",{className:"BookListItem__details",children:[Object(l.jsx)("a",{className:"BookListItem__title",href:"/#",children:t.book.title}),Object(l.jsx)("span",{className:"BookListItem__author mb-2",children:t.book.author}),Object(l.jsx)("span",{className:"BookListItem__price ",children:"$".concat(t.book.price)})]}),Object(l.jsx)("button",{className:"BookListItem__button btn btn-info mb-2",onClick:t.onAddToCart,children:"Add to cart"})]})]})},d=n(23),j=Object(c.createContext)(),O=j.Provider,h=j.Consumer,f=function(){return function(t){return function(e){return Object(l.jsx)(h,{children:function(n){return Object(l.jsx)(t,Object(d.a)(Object(d.a)({},e),{},{bookstoreService:n}))}})}}},m=function(t){return{type:"BOOK_ADDED_TO_CART",payload:t}},p=function(t,e){return function(){t.getBooks().then((function(t){return e({type:"FECTH_BOOKS_SUCCESS",payload:t})})).catch((function(t){return e({type:"FECTH_BOOKS_FAILURE",payload:t})}))}},x=(n(40),n(41),function(){return Object(l.jsx)("div",{children:"Loading..."})}),_=(n(42),function(){return Object(l.jsx)("div",{children:"Error!"})});var k=f()(Object(a.b)((function(t){return{books:t.bookList.books,loading:t.bookList.loading,error:t.bookList.error}}),(function(t,e){return{fetchBooks:p(e.bookstoreService,t),onAddToCart:function(e){return t(m(e))}}}))((function(t){return Object(c.useEffect)((function(){t.fetchBooks()}),[]),t.error?Object(l.jsx)(_,{}):t.loading?Object(l.jsx)(x,{}):Object(l.jsx)("ul",{className:"BookList",children:t.books.map((function(e){return Object(l.jsx)("li",{className:"BookList__item",children:Object(l.jsx)(b,{book:e,onAddToCart:function(){return t.onAddToCart(e.id)}})},+e.id)}))})})));n(43);var v={onIncrease:m,onDecrease:function(t){return{type:"BOOK_REMOVED_FROM_CART",payload:t}},onDelete:function(t){return{type:"ALL_BOOKS_REMOVED_FROM_CART",payload:t}}},C=Object(a.b)((function(t){return{items:t.cart.cartItems,total:t.cart.orderTotal}}),v)((function(t){var e=t.items.map((function(e,n){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"p-2",width:"5%",children:n+1}),Object(l.jsx)("td",{width:"60%",children:e.title}),Object(l.jsx)("td",{children:e.quantity}),Object(l.jsx)("td",{children:"$".concat(e.price)}),Object(l.jsxs)("td",{className:"Cart__table-action p-3",width:"15%",children:[Object(l.jsx)("button",{className:"Cart__table-button btn btn-outline-warning ",onClick:function(){return t.onDecrease(e.id)},children:Object(l.jsx)("i",{className:"fa fa-minus-circle"})}),Object(l.jsx)("button",{className:"Cart__table-button btn btn-outline-success ",onClick:function(){return t.onIncrease(e.id)},children:Object(l.jsx)("i",{className:"fa fa-plus-circle"})}),Object(l.jsx)("button",{className:"Cart__table-button btn btn-outline-danger ",onClick:function(){return t.onDelete(e.id)},children:Object(l.jsx)("i",{className:"fa fa-trash-o"})})]})]},e.id)}));return Object(l.jsxs)("section",{className:"Cart",children:[Object(l.jsx)("h2",{className:"Cart__title",children:"Your order"}),Object(l.jsxs)("table",{className:"Cart__table",children:[Object(l.jsx)("thead",{className:"Cart__table-header",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"p-2",children:"#"}),Object(l.jsx)("th",{children:"Item"}),Object(l.jsx)("th",{children:"Count"}),Object(l.jsx)("th",{children:"Price"}),Object(l.jsx)("th",{children:"Action"})]})}),Object(l.jsx)("tbody",{children:e})]}),Object(l.jsx)("span",{className:"Cart__total",children:" Total: $50 "})]})}));var g=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(k,{}),Object(l.jsx)(C,{})]})};var y=function(){return Object(l.jsx)("div",{children:"Cart Page"})},N=(n(44),function(){return Object(l.jsxs)("main",{className:"container",children:[Object(l.jsx)(u,{numItems:5,total:210}),Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{path:"/Baka-Store",component:g,exact:!0}),Object(l.jsx)(s.a,{path:"/cart",component:y})]})]})}),B=n(16),E=n(17),A=function(){function t(){Object(B.a)(this,t),this.data=[{id:1,title:"The Blade Itself",author:"Joe Abercrombie",price:25,cover:"https://i1.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-the-blade-itself.jpg?resize=424%2C650&ssl=1"},{id:2,title:"Before They Are Hanged",author:"Joe Abercrombie",price:40,cover:"https://i0.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-before-they-are-hanged.jpg?resize=423%2C650&ssl=1"},{id:3,title:"Last Argument of Kings",author:"Joe Abercrombie",price:32,cover:"https://i1.wp.com/joeabercrombie.com/wp-content/uploads/2014/03/uk-orig-last-argument-of-kings.jpg?resize=424%2C650&ssl=1"}]}return Object(E.a)(t,[{key:"getBooks",value:function(){var t=this;return new Promise((function(e,n){setTimeout((function(){e(t.data),n(new Error("Oshibka!"))}),700)}))}}]),t}(),L=n(15),I=function(t,e){if(void 0===t)return{books:[],loading:!0,error:null};switch(e.type){case"FECTH_BOOKS_SUCCESS":return{books:e.payload,loading:!1,error:null};case"FECTH_BOOKS_FAILURE":return{books:[],loading:!1,error:e.payload};default:return t.bookList}},T=n(11),w=function(t,e,n){return 0===e.quantity?[].concat(Object(T.a)(t.slice(0,n)),Object(T.a)(t.slice(n+1))):-1===n?[].concat(Object(T.a)(t),[e]):[].concat(Object(T.a)(t.slice(0,n)),[e],Object(T.a)(t.slice(n+1)))},S=function(t,e,n){var c=t.bookList.books,r=t.cart.cartItems,o=c.find((function(t){return t.id===e})),a=r.findIndex((function(t){return t.id===e})),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=e.id,r=void 0===c?t.id:c,o=e.title,a=void 0===o?t.title:o,i=e.quantity,s=void 0===i?0:i,l=e.price;return{id:r,title:a,quantity:s+n,price:(void 0===l?0:l)+n*t.price}}(o,r[a],n);return{orderTotal:0,cartItems:w(r,i,a)}},R=function(t,e){if(void 0===t)return{cartItems:[],orderTotal:0};switch(e.type){case"BOOK_ADDED_TO_CART":return S(t,e.payload,1);case"BOOK_REMOVED_FROM_CART":return S(t,e.payload,-1);case"ALL_BOOKS_REMOVED_FROM_CART":var n=t.cart.cartItems.find((function(t){return t.id===e.payload}));return S(t,e.payload,-n.quantity);default:return t.cart}},D=function(t,e){return{bookList:I(t,e),cart:R(t,e)}},F=Object(L.b)(D),K=n(27),H=n(26),M=function(t){Object(K.a)(n,t);var e=Object(H.a)(n);function n(){var t;Object(B.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={hasError:!1},t}return Object(E.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(l.jsx)(_,{}):this.props.children}}]),n}(c.Component),q=new A;o.a.render(Object(l.jsx)(a.a,{store:F,children:Object(l.jsx)(M,{children:Object(l.jsx)(O,{value:q,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(N,{})})})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b6da1697.chunk.js.map